(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{123:function(e,t){},167:function(e,t,a){},173:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(57),s=(a(69),a(3)),l=a(174),o=a(8),i=Object(n.createContext)(),m=a(62),u=a(1),d=a.n(u),f=a(6),E=a(5),p=function(e){var t=e.activeTab;return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header-text"},r.a.createElement("span",null,t)),r.a.createElement("div",{className:"header-add-user"},r.a.createElement("i",{className:"fas fa-user-plus"})))},v=function(e){var t=e.activeTab,a=e.setActiveTab;return r.a.createElement("div",{className:"footer"},r.a.createElement("div",{className:"footer-item ".concat("Contacts"===t?"active":""),onClick:function(){return a("Contacts")}},r.a.createElement("i",{className:"fas fa-user-friends"}),r.a.createElement("span",{className:"text-center"},"Contacts")),r.a.createElement("div",{className:"footer-item ".concat("Chats"===t?"active":""),onClick:function(){return a("Chats")}},r.a.createElement("i",{className:"fas fa-comment-alt"}),r.a.createElement("span",null,"Chats")),r.a.createElement("div",{className:"footer-item ".concat("Settings"===t?"active":""),onClick:function(){return a("Settings")}},r.a.createElement("i",{className:"fas fa-cog"}),r.a.createElement("span",null,"Settings")))},h=a(4),g=function(){var e=Object(n.useContext)(i),t=e.store,a=e.setContext;if(!Object(h.get)(t,"user"))return null;var c=t.user,s=t.channels,l=c.friends||[],o=function(){var e=Object(E.a)(d.a.mark(function e(n){var r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(r=Object(h.find)(s,function(e){var t=Object(h.map)(Object(h.get)(e,"participants"),"_id");return"PRIVATE"===e.type&&t.includes(n._id)&&t.includes(c._id)}))&&a(Object(f.a)({},t,{activeChannel:r}));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"friend-list"},l.map(function(e,t){return r.a.createElement("div",{className:"user",key:t,onClick:function(){return o(e)}},r.a.createElement("div",{className:"profile-pic"},r.a.createElement("span",null,"".concat(e.firstName[0]," ").concat(e.lastName[0]))),r.a.createElement("div",{className:"user-detail"},r.a.createElement("span",{className:"username"},"".concat(e.firstName," ").concat(e.lastName)),r.a.createElement("span",{className:"last-seen"},"Seen a long time ago")),r.a.createElement("div",{className:"online-status"},t%2===0?r.a.createElement("div",{className:"online"}):r.a.createElement("div",{className:"offline"})))}))},N=function(){return r.a.createElement("h4",null,"Not Impelented !!")},b=function(e){var t=e.logout;return r.a.createElement("div",{className:"settings"},r.a.createElement("div",{className:"header-text"},r.a.createElement("span",null,"My Account")),r.a.createElement("div",{className:"settings-menu"},r.a.createElement("div",{className:"menu-item edit-profile"},r.a.createElement("div",null,r.a.createElement("i",{className:"fas fa-user"}),r.a.createElement("span",null,"Edit Profile"))),r.a.createElement("div",{className:"menu-item change-password"},r.a.createElement("div",null,r.a.createElement("i",{className:"fas fa-key"}),r.a.createElement("span",null,"Change Password"))),r.a.createElement("div",{className:"menu-item logout",onClick:t},r.a.createElement("div",null,r.a.createElement("i",{className:"fas fa-sign-out-alt"}),r.a.createElement("span",null,"Logout")))))},O=(a(74),function(){var e=Object(n.useContext)(i).store,t=Object(n.useState)("Contacts"),a=Object(s.a)(t,2),c=a[0],l=a[1];return r.a.createElement("div",{className:"sidebar"},r.a.createElement(p,{activeTab:c}),r.a.createElement("div",{className:"sidebar-dynamic-content"},"Contacts"===c&&r.a.createElement(g,null),"Chats"===c&&r.a.createElement(N,null),"Settings"===c&&r.a.createElement(b,{logout:function(){localStorage.clear(),e.Socket.disconnect(),window.location.reload()}})),r.a.createElement(v,{setActiveTab:l,activeTab:c}))}),j=a(31),x=a.n(j),w="https://api.shankar.xyz",C=function(){var e={};return localStorage.getItem("TOKEN")&&(e.Authorization=localStorage.getItem("TOKEN")),e},y=function(e){return console.log("GET /".concat(e)),x.a.get("".concat(w,"/").concat(e),{headers:C()}).then(function(e){return"OK"===Object(h.get)(e,"data.status")?Object(h.get)(e,"data.data"):null}).catch(function(e){throw Object(h.get)(e,"response.data.error",{message:"Unknown Error !!"})})},k=function(e,t){return console.log("POST /".concat(e)),x.a.post("".concat(w,"/").concat(e),t,{headers:C()}).then(function(e){return"OK"===Object(h.get)(e,"data.status")?Object(h.get)(e,"data.data"):null}).catch(function(e){throw Object(h.get)(e,"response.data.error",{message:"Unknown Error !!"})})},S=function(e){var t=e.friend,a=void 0===t?{}:t,n=a.firstName,c=a.lastName;return r.a.createElement("div",{className:"chat-header"},r.a.createElement("div",{className:"chatting-with"},r.a.createElement("span",null,"".concat(n," ").concat(c)),r.a.createElement("span",{className:"online-status"},"Active now")))},_=function(e){var t=e.send,a=Object(n.useState)(""),c=Object(s.a)(a,2),l=c[0],o=c[1];return r.a.createElement("div",{className:"msg-form"},r.a.createElement("input",{className:"form-control",value:l,onChange:function(e){var t=e.target.value;return o(t)},onKeyPress:function(e){"Enter"===e.key&&(t(l),o(""),function(){var e=document.getElementsByClassName("conversation")[0];e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}())}}))},T=function(e){var t=e.msg;return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("p",{className:"sent"},t.content)))},I=function(e){var t=e.msg;return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",null,r.a.createElement("p",{className:"reply"},t.content)))},K=function(){var e=Object(n.useContext)(i).store,t=e.user,a=e.activeChannel,c=Object(n.useState)([]),l=Object(s.a)(c,2),o=l[0],m=l[1],u=a.participants.find(function(e){return e._id!==t._id}),f=e.Socket;Object(n.useEffect)(Object(E.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("channels/".concat(a._id,"/messages"));case 2:t=e.sent,f.emit("join_private_channel",{channel:a._id}),m(t),f.on("receive_message",function(e){e.from===u._id&&(t.push({content:e.content}),m(t))});case 6:case"end":return e.stop()}},e,this)})),[a._id]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{friend:u}),r.a.createElement("div",{className:"conversation"},r.a.createElement("ul",null,o.map(function(e,a){return r.a.createElement(r.a.Fragment,{key:a},e.from===t._id?r.a.createElement(T,{msg:e}):r.a.createElement(I,{msg:e}))}))),r.a.createElement(_,{send:function(e){o.push({content:e,from:t._id,channel:a._id}),m(o),f.emit("send_message",{content:e,channel:a._id})}}))},P=function(){return r.a.createElement("div",{className:"no-chat-selected"},"Please select a chat to start messaging")},q=(a(94),function(){var e=Object(n.useContext)(i).store;return r.a.createElement("div",{className:"chat"},e.activeChannel?r.a.createElement(K,null):r.a.createElement(P,null))}),A=(a(96),a(58)),F=a.n(A),z=function(){var e=Object(n.useContext)(i),t=e.store,a=e.setContext;return Object(n.useEffect)(Object(E.a)(d.a.mark(function e(){var n,r,c;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("users");case 2:return n=e.sent.shift(),e.next=5,y("channels");case 5:r=e.sent,console.log("Establishing socket connection.."),c=F.a.connect("https://api.shankar.xyz",{query:{Authorization:localStorage.getItem("TOKEN")}}),a(Object(f.a)({},t,{user:n,channels:r,Socket:c}));case 8:case"end":return e.stop()}},e,this)})),[localStorage.getItem("TOKEN")]),r.a.createElement("div",{className:"main"},r.a.createElement(O,null),r.a.createElement(q,null))},L=a(9),D=a(59),B=a.n(D),J=(a(167),function(e,t){var a=Object(n.useState)({error:!1,username:B()(e,"location.state.username",""),password:""}),c=Object(s.a)(a,2),l=c[0],o=c[1],i=function(e){var t,a=e.target;o(Object(f.a)({},l,(t={},Object(L.a)(t,a.name,a.value),Object(L.a)(t,"error",""),t)))},m=function(){var t=Object(E.a)(d.a.mark(function t(a){var n,r,c;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n=l.username,r=l.password,t.prev=2,t.next=5,k("auth/login",{username:n,password:r});case 5:(c=t.sent)&&c.token&&(localStorage.setItem("TOKEN",c.token),e.history.push("/")),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),o(Object(f.a)({},l,{error:t.t0.message}));case 12:case"end":return t.stop()}},t,this,[[2,9]])}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:m},r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h2",{className:"heading"},"Login")),r.a.createElement("div",{className:"text-center error-text "+(l.error?"":"visibility-hidden")},r.a.createElement("span",null,l.error)),r.a.createElement("input",{type:"text",className:"form-control col-sm-9",name:"username",id:"username",value:l.username,onChange:i,required:!0}),r.a.createElement("input",{type:"password",className:"form-control col-sm-9",name:"password",id:"password",value:l.password,onChange:i,required:!0}),r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{type:"submit",className:"btn login-btn"},"Login")),r.a.createElement("div",{className:"text-center signup-text"},r.a.createElement("span",null,"Don't have an account yet? ",r.a.createElement("a",{href:"/register"},"Create here")))))}),U=function(e,t){var a=Object(n.useState)({error:"",firstName:"",lastName:"",email:"",password:""}),c=Object(s.a)(a,2),l=c[0],o=c[1],i=function(e){var t,a=e.target;o(Object(f.a)({},l,(t={},Object(L.a)(t,a.name,a.value),Object(L.a)(t,"error",""),t)))},m=function(){var e=Object(E.a)(d.a.mark(function e(t){var a,n,r,c,s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=l.firstName,n=l.lastName,r=l.email,c=l.password,e.prev=2,e.next=5,k("auth/register",{firstName:a,lastName:n,email:r,password:c});case 5:s=e.sent,R.push("/login",{username:s.username}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o(Object(f.a)({},l,{error:e.t0.message}));case 12:case"end":return e.stop()}},e,this,[[2,9]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:m},r.a.createElement("div",{className:"login-container"},r.a.createElement("div",{className:"text-center"},r.a.createElement("h2",{className:"heading"},"Signup")),r.a.createElement("div",{className:"text-center error-text "+(l.error?"":"visibility-hidden")},r.a.createElement("span",null,l.error)),r.a.createElement("input",{type:"text",className:"form-control col-sm-9",placeholder:"First Name",name:"firstName",id:"firstName",value:l.firstName,onChange:i,required:!0}),r.a.createElement("input",{type:"text",className:"form-control col-sm-9",placeholder:"Last Name",name:"lastName",id:"lastName",value:l.lastName,onChange:i,required:!0}),r.a.createElement("input",{type:"text",className:"form-control col-sm-9",placeholder:"Email",name:"email",id:"email",value:l.email,onChange:i,required:!0}),r.a.createElement("input",{type:"password",className:"form-control col-sm-9",placeholder:"Password",name:"password",id:"password",value:l.password,onChange:i,required:!0}),r.a.createElement("div",{className:"text-center"},r.a.createElement("button",{type:"submit",className:"btn login-btn"},"Sign up"))))},G=function(){return localStorage.getItem("TOKEN")},H=function(e){var t=e.component,a=Object(m.a)(e,["component"]);return r.a.createElement(l.b,Object.assign({},a,{render:function(e){return G()?r.a.createElement(t,e):r.a.createElement(l.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},M=Object(l.e)(function(){return r.a.createElement(l.d,null,r.a.createElement(H,{component:z,exact:!0,path:"/"}),r.a.createElement(l.b,{exact:!0,path:"/",render:function(){return G()?r.a.createElement(l.a,{to:"/"}):r.a.createElement(l.a,{to:"/login"})}}),r.a.createElement(l.b,{exact:!0,path:"/login",render:function(){return G()?r.a.createElement(l.a,{to:"/"}):r.a.createElement(l.b,{path:"/login",component:J})}}),r.a.createElement(l.b,{exact:!0,path:"/register",component:U}),r.a.createElement(l.a,{to:"/"}))}),R=Object(o.a)();Object(c.render)(r.a.createElement(function(){var e=Object(n.useState)({}),t=Object(s.a)(e,2),a=t[0],c=t[1];return r.a.createElement(i.Provider,{value:{store:a,setContext:c}},r.a.createElement(l.c,{history:R},r.a.createElement(M,null)))},null),document.getElementById("root"))},64:function(e,t,a){e.exports=a(173)},69:function(e,t,a){},74:function(e,t,a){},94:function(e,t,a){},96:function(e,t,a){}},[[64,2,1]]]);
//# sourceMappingURL=main.efcbdf88.chunk.js.map