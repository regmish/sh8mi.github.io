(this["webpackJsonpsimpleshop-ui"]=this["webpackJsonpsimpleshop-ui"]||[]).push([[0],{17:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),s=a(11),r=a.n(s),i=(a(17),a(2)),l=a.n(i),o=a(4),d=a(5),j=a(7),u=a(12),b=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL||"http://localhost:5000",h=function(){var e=Object(o.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(l.a.mark((function e(t,a){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",body:JSON.stringify(a)});case 2:return c=e.sent,e.abrupt("return",c.json());case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return h("".concat(b,"/items?query=").concat(e))},p=a(0),x=function(e){var t=e.position,a=void 0===t?"end":t,c=e.name,n=void 0===c?"drawer":c,s=e.children;return Object(p.jsxs)("div",{className:"offcanvas offcanvas-".concat(a),tabIndex:"-1",id:n,"aria-labelledby":"".concat(n,"Label"),"data-bs-backdrop":"true",children:[Object(p.jsx)("div",{className:"offcanvas-header"}),Object(p.jsx)("div",{className:"offcanvas-body",children:s})]})},v=a(3),f=a(6),w=function(e){var t=e.quantity,a=void 0===t?1:t,c=e.updateQuantity,n=e.className,s=void 0===n?"item-counter":n;return Object(p.jsxs)("div",{className:s,children:[Object(p.jsx)("button",{className:"".concat(s,"-dec"),disabled:a<=1,onClick:function(){return c(a-1)},children:" -"}),Object(p.jsxs)("span",{className:"".concat(s,"-val"),children:[" ",a," "]}),Object(p.jsx)("button",{className:"".concat(s,"-inc"),onClick:function(){return c(a+1)},children:" + "})]})},N=function(){var e=Object(j.useStripe)(),t=Object(j.useElements)(),a=M().store,c=function(){var c=Object(o.a)(l.a.mark((function c(n){var s,r,i,o,d;return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(n.preventDefault(),window.$(".pay-button").prop("disabled",!0),window.$("#pay-loading").show(),window.$(".pay-button-text").hide(),e&&t){c.next=6;break}return c.abrupt("return");case 6:return c.next=8,e.createPaymentMethod({type:"card",card:t.getElement(j.CardElement)});case 8:if(s=c.sent,r=s.error,i=s.paymentMethod,!r){c.next=16;break}window.$("#charge-failure-alert").show(),setTimeout((function(){window.$("#charge-failure-alert").hide(),window.$(".pay-button").prop("disabled",!1),window.$("#pay-loading").hide(),window.$(".pay-button-text").show()}),1e3),c.next=23;break;case 16:return o=Object(f.a)(a.cart),d={},o.forEach((function(e){return d[e.id]=e.quantity})),c.next=21,l={itemlist:d},u=i.id,m("".concat(b,"/charge/?apikey=test_api_key&payment_method=").concat(u),l);case 21:c.sent&&(window.$("#checkoutModal").modal("hide"),window.$("#charge-success-alert").show(),setTimeout((function(){window.$("#charge-success-alert").hide()}),1e3));case 23:case"end":return c.stop()}var l,u}),c)})));return function(e){return c.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"modal fade",id:"checkoutModal","aria-hidden":"true","aria-labelledby":"checkoutModallabel",tabIndex:"-1",children:Object(p.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:Object(p.jsxs)("div",{className:"modal-content",children:[Object(p.jsx)("div",{className:"modal-header",children:Object(p.jsx)("h5",{className:"modal-title",children:"Enter your Credit Card Details"})}),Object(p.jsx)("div",{className:"modal-body",children:Object(p.jsx)(j.CardElement,{options:{hidePostalCode:!0}})}),Object(p.jsx)("div",{className:"modal-footer",children:Object(p.jsxs)("button",{className:"btn btn-primary pay-button",onClick:c,children:[Object(p.jsx)("span",{className:"pay-button-text",children:"Pay"}),Object(p.jsx)("span",{className:"pay-loading",id:"pay-loading",children:Object(p.jsx)("svg",{version:"1.1",id:"loader-1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 50 50",enableBackground:"new 0 0 50 50",children:Object(p.jsx)("path",{fill:"#fff",d:"M43.935,25.145c0-10.318-8.364-18.683-18.683-18.683c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615c8.072,0,14.615,6.543,14.615,14.615H43.935z",children:Object(p.jsx)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"0.6s",repeatCount:"indefinite"})})})})]})})]})})})},g=function(){var e=M(),t=e.store,a=e.setStoreData,c=null===t||void 0===t?void 0:t.cart.reduce((function(e,t){return e+t.quantity*t.price}),0),n=function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.$("#checkoutModal").modal("show");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"cart-container",children:[Object(p.jsxs)("div",{className:"cart-header",children:[Object(p.jsx)("div",{className:"cart-title",children:Object(p.jsx)("span",{children:"Your Cart"})}),Object(p.jsx)("div",{className:"cart-close","data-bs-dismiss":"offcanvas",children:Object(p.jsx)("span",{children:"X"})})]}),Object(p.jsx)("div",{className:"cart-body",children:t.cart.length?null===t||void 0===t?void 0:t.cart.map((function(e){return Object(p.jsxs)("div",{className:"cart-item",children:[Object(p.jsx)("div",{className:"cart-item-thumb",children:Object(p.jsx)("img",{src:e.imageUrl,alt:e.name})}),Object(p.jsxs)("div",{className:"cart-item-description",children:[Object(p.jsx)("span",{className:"cart-item-name",children:e.name}),Object(p.jsx)("span",{className:"cart-item-price",children:e.price}),Object(p.jsx)("span",{className:"cart-item-remove",onClick:function(){return function(e){var c=Object(f.a)(t.cart),n=t.cart.findIndex((function(t){return t.id===e.id}));c.splice(n,1),a(Object(v.a)(Object(v.a)({},t),{},{cart:c}))}(e)},children:"Remove"})]}),Object(p.jsx)("div",{className:"cart-item-counter",children:Object(p.jsx)(w,{quantity:e.quantity,className:"cart-counter",updateQuantity:function(c){return function(e,c){var n=Object(f.a)(t.cart),s=t.cart.findIndex((function(t){return t.id===e.id}));s>-1&&(c?n.splice(s,1,Object(v.a)(Object(v.a)({},e),{},{quantity:c})):n.splice(s,1)),a(Object(v.a)(Object(v.a)({},t),{},{cart:n}))}(e,c)}})})]},e.id)})):Object(p.jsx)("div",{className:"empty-cart",children:"Your cart is empty."})}),Object(p.jsxs)("div",{className:"sub-total",children:[Object(p.jsx)("span",{className:"sub-total-title",children:"Subtotal :"}),Object(p.jsxs)("span",{className:"sub-total-price",children:["\u20ac ",parseFloat(c).toFixed(2)]})]}),Object(p.jsx)("div",{className:"cart-footer",children:Object(p.jsxs)("button",{onClick:function(){return n()},children:[Object(p.jsx)("span",{className:"cart-button",children:Object(p.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"#887e7e",className:"bi bi-cart-plus",viewBox:"0 0 16 16",children:[Object(p.jsx)("path",{d:"M9 5.5a.5.5 0 0 0-1 0V7H6.5a.5.5 0 0 0 0 1H8v1.5a.5.5 0 0 0 1 0V8h1.5a.5.5 0 0 0 0-1H9V5.5z"}),Object(p.jsx)("path",{d:"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"})]})}),Object(p.jsx)("span",{className:"add-to-cart-text",children:"Proceed to checkout"})]})}),Object(p.jsx)(N,{})]})},y=function(e){var t=e.onSearchResult,a=Object(c.useState)([]),n=Object(d.a)(a,2),s=n[0],r=n[1],i=Object(c.useState)(""),j=Object(d.a)(i,2),u=j[0],m=j[1],v=M().store;Object(c.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(b);case 2:t=e.sent,r(t),document.title=t.title;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var f=function(){var e=Object(o.a)(l.a.mark((function e(a){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==a.key){e.next=6;break}return e.next=3,O(u);case 3:c=e.sent,t(c),m("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"header",children:[Object(p.jsx)("div",{className:"logo-icon",children:Object(p.jsx)("img",{src:s.logoURL,alt:"Shop Logo"})}),Object(p.jsx)("div",{className:"shop-title",children:Object(p.jsx)("span",{children:s.title})}),Object(p.jsx)("div",{className:"search",children:Object(p.jsx)("input",{id:"searchInput",type:"text",value:u,onChange:function(e){return m(e.target.value)},onKeyPress:f,placeholder:"Search..."})}),Object(p.jsxs)("div",{className:"cart",onClick:function(){var e=document.getElementById("cartDrawer");new window.bootstrap.Offcanvas(e).show()},children:[Object(p.jsx)("span",{className:"cart-icon",children:Object(p.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"#887e7e",className:"bi bi-cart-plus",viewBox:"0 0 16 16",children:[Object(p.jsx)("path",{d:"M9 5.5a.5.5 0 0 0-1 0V7H6.5a.5.5 0 0 0 0 1H8v1.5a.5.5 0 0 0 1 0V8h1.5a.5.5 0 0 0 0-1H9V5.5z"}),Object(p.jsx)("path",{d:"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"})]})}),v.cart.length?Object(p.jsx)("div",{className:"number-items",children:v.cart.length}):null]}),Object(p.jsx)(x,{position:"end",name:"cartDrawer",children:Object(p.jsx)(g,{})})]})},k=function(e){var t=e.onSearchResult,a=e.children;return Object(p.jsxs)("div",{className:"layout",children:[Object(p.jsx)(y,{onSearchResult:t}),Object(p.jsx)("div",{className:"container",children:a}),Object(p.jsx)("div",{id:"charge-success-alert",className:"charge-success-alert alert alert-success",role:"alert",children:"Charge success"}),Object(p.jsx)("div",{id:"charge-failure-alert",className:"charge-failure-alert alert alert-danger",role:"alert",children:"Charge failed"})]})},S=function(e){var t=e.item,a=void 0===t?{}:t,s=M(),r=s.store,i=s.setStoreData,l=n.a.useState(1),o=Object(d.a)(l,2),j=o[0],u=o[1];return Object(c.useEffect)((function(){var e=(r.cart||[]).find((function(e){return e.id===a.id}));u((null===e||void 0===e?void 0:e.quantity)||1)}),[a,r.cart]),Object(p.jsxs)("div",{className:"item-detail",children:[Object(p.jsx)("div",{className:"item-detail-close","data-bs-dismiss":"offcanvas",children:Object(p.jsx)("span",{children:"X"})}),Object(p.jsx)("div",{className:"item-name",children:Object(p.jsx)("h1",{children:a.name})}),Object(p.jsx)("div",{className:"item-price",children:"\u20ac ".concat(a.price," EUR")}),Object(p.jsx)("div",{className:"item-image",children:Object(p.jsx)("img",{src:a.imageUrl,alt:a.name})}),Object(p.jsx)("div",{className:"quantity",children:Object(p.jsx)(w,{quantity:j,updateQuantity:u})}),Object(p.jsxs)("div",{className:"sub-total",children:[Object(p.jsx)("span",{className:"sub-total-title",children:"Subtotal :"}),Object(p.jsxs)("span",{className:"sub-total-price",children:["\u20ac ",parseFloat(a.price*j).toFixed(2)]})]}),Object(p.jsx)("div",{className:"add-to-cart","data-bs-dismiss":"offcanvas",children:Object(p.jsxs)("button",{onClick:function(){var e=Object(f.a)(r.cart),t=r.cart.findIndex((function(e){return e.id===a.id}));t>-1?j?e.splice(t,1,Object(v.a)(Object(v.a)({},a),{},{quantity:j})):e.splice(t,1):j&&e.push(Object(v.a)(Object(v.a)({},a),{},{quantity:j})),i(Object(v.a)(Object(v.a)({},r),{},{cart:e}))},children:[Object(p.jsx)("span",{className:"cart-button",children:Object(p.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"#887e7e",className:"bi bi-cart-plus",viewBox:"0 0 16 16",children:[Object(p.jsx)("path",{d:"M9 5.5a.5.5 0 0 0-1 0V7H6.5a.5.5 0 0 0 0 1H8v1.5a.5.5 0 0 0 1 0V8h1.5a.5.5 0 0 0 0-1H9V5.5z"}),Object(p.jsx)("path",{d:"M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1H.5zm3.915 10L3.102 4h10.796l-1.313 7h-8.17zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"})]})}),Object(p.jsx)("span",{className:"add-to-cart-text",children:"Add to Cart"})]})})]})},C=function(e){var t=e.items,a=void 0===t?[]:t,n=Object(c.useState)(null),s=Object(d.a)(n,2),r=s[0],i=s[1];return Object(p.jsxs)("div",{className:"items-container",children:[a.map((function(e){return Object(p.jsxs)("div",{className:"item","data-bs-toggle":"offcanvas","data-bs-target":"#itemsDrawer","aria-controls":"itemsDrawer",onClick:function(){return i(e)},children:[Object(p.jsx)("div",{className:"item-image",children:Object(p.jsx)("img",{src:e.imageUrl,alt:e.name})}),Object(p.jsx)("div",{className:"item-name",children:e.name}),Object(p.jsx)("div",{className:"item-price",children:"\u20ac ".concat(e.price," EUR")}),Object(p.jsx)("div",{className:"item-category",children:e.category})]},e.id)})),Object(p.jsx)(x,{position:"end",name:"itemsDrawer",children:r&&Object(p.jsx)(S,{item:r})})]})},E=Object(u.a)("pk_test_Yle4AOLnKeejMpFv0WzVsRdq00CbmvTuaS"),H=n.a.createContext({}),M=function(){return Object(c.useContext)(H)},z=function(e){var t=e.children,a=Object(c.useState)({cart:[]}),n=Object(d.a)(a,2),s=n[0],r=n[1],i=Object(c.useCallback)((function(e){r(e)}),[]);return Object(p.jsx)(H.Provider,{value:{store:s,setStoreData:i},children:t})},_=function(){var e=Object(c.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1];return Object(c.useEffect)((function(){(function(){var e=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:t=e.sent,n(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(p.jsx)(z,{children:Object(p.jsx)(j.Elements,{stripe:E,children:Object(p.jsx)(k,{onSearchResult:function(e){return n(e)},children:Object(p.jsx)(C,{items:a})})})})};r.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(_,{})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.dcf2b5d4.chunk.js.map